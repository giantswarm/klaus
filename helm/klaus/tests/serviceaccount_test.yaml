# ServiceAccount template tests for klaus Helm chart
#
# Run with: helm unittest ./helm/klaus

suite: ServiceAccount template tests
templates:
  - templates/serviceaccount.yaml
tests:
  - it: should create a ServiceAccount by default
    asserts:
      - hasDocuments:
          count: 1
      - isKind:
          of: ServiceAccount

  - it: should not create a ServiceAccount when disabled
    set:
      serviceAccount:
        create: false
    asserts:
      - hasDocuments:
          count: 0
