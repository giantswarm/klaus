apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "klaus.fullname" . }}
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "klaus.labels" . | nindent 4 }}
data:
  {{- if .Values.claude.systemPrompt }}
  system-prompt: {{ .Values.claude.systemPrompt | quote }}
  {{- end }}
  {{- if .Values.claude.appendSystemPrompt }}
  append-system-prompt: {{ .Values.claude.appendSystemPrompt | quote }}
  {{- end }}
  {{- if .Values.claude.mcpConfig }}
  mcp-config.json: {{ .Values.claude.mcpConfig | quote }}
  {{- end }}
  {{- if .Values.claude.jsonSchema }}
  json-schema: {{ .Values.claude.jsonSchema | quote }}
  {{- end }}
  {{- if and .Values.claude.agents (ne (toJson .Values.claude.agents) "{}") }}
  agents: {{ .Values.claude.agents | toJson | quote }}
  {{- end }}
